{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block content %}
<div class="container my-5">
  <div class="row mb-4">
    <div class="col-12">
      <h1 class="mb-2">About The Capstone Hotel</h1>
    </div>
  </div>

  {% if about_info %}
    <div class="row g-4 align-items-center">
      <div class="col-12 col-lg-6">
        <h2 class="h4 mb-3">{{ about_info.title }}</h2>
        <div class="text-muted">{{ about_info.description|safe }}</div>
      </div>
      <div class="col-12 col-lg-6">
        {% if "placeholder" in about_info.image.url %}
          <img class="img-fluid rounded shadow-sm" src="{% static 'images/hero.webp' %}" alt="About The Capstone Hotel">
        {% else %}
          <img class="img-fluid rounded shadow-sm" src="{{ about_info.image.url }}" alt="{{ about_info.title }}">
        {% endif %}
      </div>
    </div>
  {% else %}
    <div class="alert alert-dark">No About Us content available yet.</div>
  {% endif %}
</div>
<div class="container my-5">
  <div class="row g-4 align-items-start">
    <!-- Map -->
    <div class="col-12 col-lg-6">
      <h2>Visit Us</h2>
      <p>You'll find us in Rural North Cornwall</p>
      <div style="width: 100%; height: 400px; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        <iframe 
          width="100%" 
          height="100%" 
          style="border: none;" 
          src="https://www.openstreetmap.org/export/embed.html?bbox=-5.10,50.52,-4.97,50.58&layer=mapnik&marker=50.5491882,-5.0352207" 
          allowfullscreen="" 
          loading="lazy">
        </iframe>
      </div>
      <p class="mt-2 small text-muted">
        <a href="https://www.openstreetmap.org/?bbox=-5.10,50.52,-4.97,50.58&layer=mapnik&marker=50.5491882,-5.0352207" target="_blank">View larger map</a>
      </p>
    </div>
    
    <!-- Contact Form -->
    <div class="col-12 col-lg-6">
      <h2>Get In Touch</h2>
      <p>Have a question, request, or want to get in touch with us? 
        Fill out the form below and we'll get back to you as soon as possible.</p>
      
      <form method="post" action="{% url 'about_us' %}">
        {% csrf_token %}
        {{ contact_form|crispy }}
        <button type="submit" class="btn btn-dark">Submit</button>
      </form>
    </div>
  </div>
</div>

{% endblock %}