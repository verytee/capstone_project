{% extends 'base.html' %}
{% block content %}
<div class="container my-5">
  <h1 class="mb-4">Available Rooms</h1>

  <div class="row g-4">
    {% for room in object_list %}
    <div class="col-12 col-lg-4">
      <div class="card h-100 shadow-sm">
        <div class="card-img-top bg-light d-flex align-items-center justify-content-center" style="height: 250px;">
          <p class="text-muted mb-0">No Image Available</p>
        </div>

        <div class="card-body d-flex flex-column justify-content-center">
          <h5 class="card-title fw-bold mb-2">{{ room.type }}</h5>
          <p class="card-text text-muted fst-italic mb-2" style="font-size: 0.95rem;">{{ room.subtitle }}</p>
          <p class="card-text flex-grow-1">{{ room.description|safe }}</p>
        </div>

        <div class="card-footer bg-light border-top">
          {% if user.is_authenticated %}
          <form method="post" action="{% url 'booking_list' %}">
            {% csrf_token %}
            <input type="hidden" name="next" value="{% url 'manage_bookings' %}">
            <input type="hidden" name="room_id" value="{{ room.id }}">
            <div class="mb-2">
              <label for="check-in-{{ room.id }}" class="form-label small mb-1">Check-in Date</label>
              <input type="date" class="form-control form-control-sm" id="check-in-{{ room.id }}" name="check_in_date" required min="{% now 'Y-m-d' %}">
            </div>
            <div class="mb-2">
              <label for="nights-{{ room.id }}" class="form-label small mb-1">Number of Nights</label>
              <input type="number" class="form-control form-control-sm" id="nights-{{ room.id }}" name="number_of_nights" min="1" required>
            </div>
            <button type="submit" class="btn btn-dark">Book Now</button>
          </form>
          {% else %}
          <p class="text-center text-muted mb-0 small">
            <a href="{% url 'account_login' %}">Log in</a> to book this room
          </p>
          {% endif %}
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
    {% if not object_list %}
  <div class="alert alert-info text-center mt-4">No rooms available at the moment.</div>
  {% endif %}
</div>

{% endblock %}




